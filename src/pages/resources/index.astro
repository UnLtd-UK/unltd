---
import Template from "@layouts/Template.astro";
import Container from "@components/Container.astro";
import Tabs from "@components/Tabs.jsx";
import { resources } from "@data/resources.js";
import slugify from "slugify";
import { calculateReadTime } from "@data/functions/read-time.js";

const name = "Resources";
const slug = "resource";
const description = "Read our resources";
const breadcrumbs = [
    {
        name: name,
        slug: slug,
    },
];

const uniqueUsers = [...new Set(resources.map((resource) => resource.user))];

---

<Template name={name} description={description} breadcrumbs={breadcrumbs}>
    <Container>
        <div class="py-12 sm:py-12">
            <div class="mx-auto max-w-7xl flex flex-col gap-2">
                <div class="mx-auto max-w-2xl lg:mx-0">
                    <h2
                        class="mt-2 text-4xl font-bold tracking-tight text-violet-200 sm:text-6xl"
                    >
                        Resources
                    </h2>
                    <p class="mt-6 text-lg leading-8 text-violet-400">
                        Anim aute id magna aliqua ad ad non deserunt sunt. Qui
                        irure qui lorem cupidatat commodo. Elit sunt amet fugiat
                        veniam occaecat fugiat aliqua.
                    </p>
                </div>
            </div>
        </div>

        <!-- Filter Links -->
        <div class="flex flex-wrap gap-4 mb-8">
            <a
                href="/resources"
                class={`flex-none rounded-full px-3.5 py-2.5 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 text-violet-100 border border-violet-500 ${
                    Astro.url.pathname === `/resources` ||
                    Astro.url.pathname === `/resources/`
                        ? "bg-violet-950 hover:bg-violet-900"
                        : "bg-violet-800 hover:bg-violet-700 focus-visible:outline-violet-600"
                }`}
            >
                For all
            </a>
            {
                uniqueUsers.map((user) => (
                    <a
                        href={`/resources/${slugify(user, {
                            lower: true,
                            strict: true,
                            locale: "en",
                            trim: true,
                        })}`}
                        class={`flex-none rounded-full px-3.5 py-2.5 text-sm font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 text-violet-100 border border-violet-500 ${
                            Astro.url.pathname ===
                            `/resources/${slugify(user, { lower: true, strict: true, locale: "en", trim: true })}`
                                ? "bg-violet-950  hover:bg-violet-900"
                                : "bg-violet-800  hover:bg-violet-700 focus-visible:outline-violet-600"
                        }`}
                    >
                        {user}
                    </a>
                ))
            }
        </div>

        <div class="mx-auto max-w-7xl">
            <div
                class="mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3"
            >
                {
                    resources.map((resource) => {
                            return (
                                <article class="flex flex-col items-start justify-between hover:bg-violet-900 p-4 rounded-xl">
                                    <div class="max-w-xl">
                                        <div class="group relative">
                                            <span class="text-xs text-violet-400">
                                                {`${calculateReadTime(
                                                    resource.body,
                                                )} MINS`}
                                            </span>
                                            <h3 class="mt-3 text-lg/6 font-semibold text-violet-200 group-hover:text-violet-300">
                                                <a
                                                    href={`/resources/${slugify(
                                                        resource.name,
                                                        {
                                                            lower: true,
                                                            strict: true,
                                                            locale: "en",
                                                            trim: true,
                                                        },
                                                    )}`}
                                                >
                                                    <span class="absolute inset-0" />
                                                    {resource.name}
                                                </a>
                                            </h3>
                                            <p class="mt-5 line-clamp-3 text-sm/6 text-violet-400">
                                                {resource.description}
                                            </p>
                                        </div>
                                    </div>
                                </article>
                            );
                    })
                }
            </div>
        </div>
    </Container>
</Template>
