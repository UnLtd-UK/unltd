---
import Template from "@layouts/Template.astro";
import Breadcrumbs from "@components/Breadcrumbs.astro";
import Container from "@components/Container.astro";
import { styles } from "@data/styles.js";
import Icon from "@components/award/cards/Icon.astro";
import Intro from "@components/award/programme/Intro.astro";
import Posts from "@components/award/programme/Posts.astro";
import Services from "@components/award/programme/Services.astro";
import Quotes from "@components/award/programme/Quotes.astro";
import Criteria from "@components/award/programme/Criteria.astro";
import Videos from "@components/award/programme/Videos.astro";
import Other from "@components/award/programme/Other.astro";
import Banner from "@components/award/programme/Banner.astro";

import { programmes } from "@data/programmes.js";
import slugify from "slugify";

export async function getStaticPaths() {
  return programmes.map((programme) => {
    let slug = slugify(programme.name, {
      lower: true,
      strict: true,
      locale: "en",
      trim: true,
    });

    let breadcrumbs = [
      {
        name: "Awards",
        slug: "/award",
      },
      {
        name: programme.name,
        slug: `/award/${slug}`,
      },
    ];

    programme.breadcrumbs = breadcrumbs;

    let item = {
      params: {
        programme: slugify(slug),
      },
      props: {
        programme: programme,
      },
    };

    return item;
  });
}

const { programme } = Astro.props;
---

<Template
  name={programme.name}
  description={programme.description}
  breadcrumbs={programme.breadcrumbs}
  bg={styles[programme.name].bg}
>
  <Intro programme={programme} styles={styles[programme.name]} />

  <Videos styles={styles[programme.name]} videos={programme.videos} />

  <Quotes styles={styles[programme.name]} quotes={programme.quotes} />

  <Services styles={styles[programme.name]} services={programme.services} />

  <Criteria
    styles={styles[programme.name]}
    age={programme.age}
    geography={programme.geography}
    sectors={programme.sectors}
  />

  <Banner styles={styles[programme.name]} programme={programme} />

  {
    programme.posts.length > 0 && (
      <Posts
        styles={styles[programme.name]}
        posts={programme.posts}
        name={programme.name}
      />
    )
  }

  <Other
    current={programme}
    programmes={programmes}
    styles={styles[programme.name]}
    name={programme.name}
  />
</Template>
