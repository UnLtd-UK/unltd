---
import Template from "../../../layouts/Template.astro";
import Breadcrumbs from "../../../components/Breadcrumbs.astro";
import Container from "../../../components/Container.astro";

import AwardsDesktop from "../../../components/fund/AwardsDesktop.astro";
import AwardsMobile1 from "../../../components/fund/AwardsMobile1.astro";
import AwardsMobile2 from "../../../components/fund/AwardsMobile2.astro";
import Testamonial from "../../../components/fund/Testamonial.astro";
import { funds } from "../../../data/directus/funds.js";

export async function getStaticPaths() {
  return funds.map((fund) => {
    let breadcrumbs = [
      {
        name: "Funds",
        slug: "/funds",
      },
      {
        name: fund.name,
        slug: `/funds/${fund.slug}`,
      },
    ];

    fund.breadcrumbs = breadcrumbs;

    let oogle = {
      params: {
        fund: fund.slug,
      },
      props: {
        fund: fund,
      },
    };

    return oogle;
  });
}

const { fund } = Astro.props;
---

<Template name={fund.name} description={fund.description}>
  <Container>
    <Breadcrumbs breadcrumbs={fund.breadcrumbs} />
  </Container>
  <div class="bg-white">
    <div class="relative isolate overflow-hidden bg-slate-900 py-20 mb-10">
      <img
        src="/img/movement_for_change.jpg"
        alt=""
        class="absolute inset-0 -z-10 h-full w-full object-cover hidden lg:block"
      />

      <img
        src="/img/movement_for_change_2.jpg"
        alt=""
        class="absolute inset-0 -z-10 h-full w-full object-cover block lg:hidden"
      />
      <div
        class="absolute inset-x-0 top-[-10rem] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[-20rem]"
      >
      </div>
      <div class="px-6 lg:px-8">
        <div class="mx-auto max-w-7xl sm:px-6 lg:px-8">
          <div class="col-span-4 flex flex-col gap-20 lg:flex-row">
            <div class="lg:basis-1/2 flex flex-col gap-8">
              <div>
                <div>
                  <span
                    class="inline-flex items-center rounded-md text-sm font-medium text-slate-200"
                    >Fund</span
                  >
                </div>
                <h1 class="text-5xl font-bold text-slate-200">
                  {fund.name}
                </h1>
              </div>

              <div class="flex flex-col gap-2">
                <div>
                  <span
                    class="inline-flex items-center rounded-full bg-green-100 px-3 py-0.5 text-sm font-medium text-green-800"
                  >
                    <svg
                      class="-ml-1 mr-1.5 h-2 w-2 text-green-400"
                      fill="currentColor"
                      viewBox="0 0 8 8"
                    >
                      <circle cx="4" cy="4" r="3"></circle>
                    </svg>
                    Open
                  </span>
                </div>

                <p class="text-xs text-slate-300">
                  From {fund.open} till {fund.close}
                </p>
              </div>

              <div>
                <p class="text-lg text-slate-200 leading-relaxed">
                  {fund.description}
                </p>
              </div>

              <div>
                <a
                  href="/grants-&-support"
                  target="_blank"
                  class="inline-flex items-center rounded-full border border-transparent text-amber-100 bg-amber-600 px-6 py-3 text-base font-medium shadow-sm hover:bg-amber-7 00 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2"
                  >Go to grants & support to apply</a
                >
              </div>
            </div>

            <Testamonial />
          </div>
        </div>
      </div>
      <div
        class="absolute inset-x-0 top-[calc(100%-13rem)] -z-10 transform-gpu overflow-hidden blur-3xl sm:top-[calc(100%-30rem)]"
      >
        <svg
          class="relative left-[calc(50%+3rem)] h-[21.1875rem] max-w-none -translate-x-1/2 sm:left-[calc(50%+36rem)] sm:h-[42.375rem]"
          viewBox="0 0 1155 678"
        >
          <path
            fill="url(#ecb5b0c9-546c-4772-8c71-4d3f06d544bc)"
            fill-opacity=".2"
            d="M317.219 518.975L203.852 678 0 438.341l317.219 80.634 204.172-286.402c1.307 132.337 45.083 346.658 209.733 145.248C936.936 126.058 882.053-94.234 1031.02 41.331c119.18 108.451 130.68 295.337 121.53 375.223L855 299l21.173 362.054-558.954-142.079z"
          ></path>
          <defs>
            <linearGradient
              id="ecb5b0c9-546c-4772-8c71-4d3f06d544bc"
              x1="1155.49"
              x2="-78.208"
              y1=".177"
              y2="474.645"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#9089FC"></stop>
              <stop offset="1" stop-color="#FF80B5"></stop>
            </linearGradient>
          </defs>
        </svg>
      </div>
    </div>

    <div class="grid grid-cols-4 gap-20 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <!-- Partners and Funders -->

      <div class="col-span-4 flex flex-col gap-10">
        <h4 class="text-5xl font-semibold text-slate-600">
          Partners and Funders
        </h4>
        <div class="flex flex-col lg:flex-row">
          {
            fund.partners.map((partner) => (
              <div class="lg:basis-1/2 flex flex-col gap-4 p-10 border-l-2">
                <div class="flex flex-row gap-4 items-center">
                  <img
                    class="inline-block h-14 w-14 lg:h-20 lg:w-20 rounded-md"
                    src={`https://unltd.directus.app/assets/${partner.organisations_id.logo}`}
                    alt=""
                  />
                  <p class="text-xl text-slate-600">
                    {partner.organisations_id.name}
                  </p>
                </div>
                <p class="text-slate-500 leading-relaxed">
                  {partner.organisations_id.description}
                </p>
              </div>
            ))
          }
          <!-- <div class="lg:basis-1/2 flex flex-col gap-4 p-10 border-l-2">
            <div class="flex flex-row gap-4 items-center">
              <img
                class="inline-block h-14 w-14 lg:h-20 lg:w-20 rounded-md"
                src="/uploads/partner_images/sport_england.webp"
                alt=""
              />
              <p class="text-xl text-slate-600">Sport England</p>
            </div>
            <p class="text-slate-500 leading-relaxed">
              Sport England invests in sport and physical activity to make it a
              normal part of life for everyone in England and remove barriers to
              help tackle society's biggest challenges.
            </p>
          </div> -->
        </div>
      </div>

      <!-- Awards -->
      <div class="col-span-4 flex flex-col gap-10 lg:col-span-4">
        <h4 class="text-5xl font-semibold text-slate-600">Grants</h4>
        <div class="flex flex-col gap-10 lg:flex-row">
          <div class="flex flex-col basis-3/4">
            <div class="flex flex-col gap-10">
              <!-- xs to lg -->
              <AwardsMobile1 />
              <AwardsMobile2 />
            </div>

            <!-- lg+ -->
            <AwardsDesktop grants={fund.grants} />
          </div>
          <div class="flex flex-col basis-1/4 gap-10">
            <div class="flex flex-col gap-10">
              <div class="flex flex-col gap-3">
                <h3 class="font-bold text-slate-500">Inclusion</h3>
                <div class="flex flex-col gap-3">
                  <p class="text-sm text-slate-500 leading-relaxed">
                    At least 50% of those supported by Movement for Change will
                    be from Black, Asian, marginalised ethnic groups or disabled
                    backgrounds
                  </p>
                  <p class="text-sm text-slate-500 leading-relaxed">
                    Movement for Change is dedicated to pushing inclusion in the
                    wider sector and beyond, seeking to address systemic
                    inequalities by highlighting the experiences of
                    underrepresented social entrepreneurs and sharing our
                    learning in devising solutions
                  </p>
                  <p class="text-sm text-slate-500 leading-relaxed">
                    We want to make it clear that at UnLtd that when we support
                    LGBTQIA+ organisations, we welcome and support trans people,
                    non-binary, gender diverse, genderqueer and gender
                    questioning people. When we support organisations focusing
                    on women's issues and rights, we include trans women. When
                    we support organisations focusing on men's issues, we
                    include trans men. We are committed to using an
                    intersectional lens on social issues, and our own learning.
                  </p>
                </div>
                <div class="flex flex-col gap-2">
                  <a
                    class="text-xs text-amber-700 hover:underline hover:text-amber-800"
                    href="/equity-commitments"
                    >Learn more about equity commitments</a
                  >
                </div>
              </div>

              <div class="flex flex-col gap-3">
                <h3 class="font-bold text-slate-500">Help</h3>
                <div class="flex flex-col gap-3">
                  <p class="text-sm text-slate-500 leading-relaxed">
                    For social entrepreneurs with questions about Movement for
                    Change, please reach out via our Contact Us page.
                  </p>
                </div>
                <div class="flex flex-col gap-2">
                  <a
                    class="text-xs text-amber-700 hover:underline hover:text-amber-800"
                    href="/contact-us">Contact us</a
                  >
                </div>
              </div>

              <div class="flex flex-col gap-4 lg:flex">
                <h3 class="font-bold text-slate-500">More funds</h3>
                <div class="flex flex-col gap-3">
                  {
                    funds.map((fund) => (
                      <a
                        href={`/funds/${fund.slug}`}
                        class="border border-slate-100 p-6 rounded-2xl flex flex-col gap-5 hover:border-amber-300 transition"
                      >
                        <div>
                          <h3 class="text-lg font-bold">{fund.name}</h3>
                          <p class="text-xs leading-relaxed">
                            {fund.description}
                          </p>
                        </div>

                        <div class="flex flex-col gap-2">
                          <h4 class="text-sm">Partners and Funders</h4>
                          <div class="flex flex-row gap-2">
                            {fund.partners.map((partner) => (
                              <div class="flex flex-col gap-2">
                                <div class="flex gap-2 items-center rounded-md">
                                  <img
                                    class="inline-block h-8 w-8 rounded-md"
                                    src={`/uploads/partner_images/{partner.organisations_id.logo}.webp`}
                                    alt=""
                                  />
                                </div>
                              </div>
                            ))}
                          </div>
                        </div>
                      </a>
                    ))
                  }
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</Template>
