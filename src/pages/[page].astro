---
import Template from "../layouts/Template.astro";
import Container from "../components/Container.astro";
import Breadcrumbs from "../components/Breadcrumbs.astro";
import Hero from "../components/Hero.astro";
import { marked } from "marked";
import slugify from "slugify";

import { pages } from "../data/pages.js";

import Faqtemplate from "../components/Faqtemplate.astro";
import Faq from "../components/Faq.astro";
import Note from "../components/Note.astro";

export async function getStaticPaths() {
  return pages.map((page) => {
    let breadcrumbs = [
      {
        name: page.name,
        slug: `/${slugify(page.name, {
          lower: true,
          strict: true,
          locale: "en",
          trim: true,
        })}`,
      },
    ];

    page.breadcrumbs = breadcrumbs;

    let item = {
      params: {
        page: slugify(page.name, {
          lower: true,
          strict: true,
          locale: "en",
          trim: true,
        }),
      },
      props: {
        page: page,
      },
    };

    return item;
  });
}

const { page } = Astro.props;
---

<Template name={page.name} description={page.description}>
  <Container>
    <Breadcrumbs breadcrumbs={page.breadcrumbs} />
    <Hero
      name={page.name}
      description={page.description}
      updated={page.date_updated}
    />
    <div
      set:html={marked.parse(page.body)}
      class="prose prose-violet dark:prose-invert lg:prose-lg prose-img:rounded-md prose-img:shadow-sm prose-img:w-full prose-a:font-bold prose-a:underline-offset-4 prose-a:decoration-orange-500 prose-a:decoration-1 hover:prose-a:decoration-2"
    />
  </Container>
</Template>
