---
/**
 * Eligible Awards Page
 * Hidden page shown to users who pass the eligibility checker
 * Not indexable (noindex) and only accessible via direct link
 */

// PROPS
const props = {
    name: "You're Eligible – Apply Now",
    slug: "/awards/eligible",
    description:
        "Congratulations! You've passed the eligibility checker. Here's everything you need to apply for an UnLtd Award.",
    noindex: true, // Prevent search engine indexing
};

const breadcrumbs = [
    {
        name: "Awards",
        path: "/awards",
    },
    {
        name: "Eligible Applicants",
        path: "/awards/eligible",
    },
];

// LAYOUT
import Template from "@layouts/Template.astro";
import Container from "@components/Container.astro";
import Breadcrumbs from "@components/Breadcrumbs.astro";

// COMPONENTS
import ApplicationRoundsProcess from "@components/awards/ApplicationRoundsProcess.astro";
import SupportResources from "@components/awards/SupportResources.astro";
import ApplicationTimeline from "@components/awards/ApplicationTimeline.astro";
import Awards from "@components/awards/Awards.astro";
import Questions from "@components/awards/Questions.astro";

// DATA
import { rounds } from "@data/rounds.js";
import { processAllRounds } from "@utils/application-rounds.js";

const { currentRound, nextOpenRound } = processAllRounds(rounds);
const isRoundOpen =
    currentRound?.isOpen && currentRound?.capacityPercentage < 100;
---

<Template name={props.name} description={props.description} noindex={true}>
    <Container>
        <Breadcrumbs breadcrumbs={breadcrumbs} />
    </Container>

    <!-- Eligible Banner -->
    <section
        class="bg-gradient-to-r from-emerald-600 to-emerald-500 text-white py-8"
    >
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div
                class="flex flex-col md:flex-row items-center justify-between gap-6"
            >
                <div class="flex items-center gap-4">
                    <div
                        class="w-16 h-16 rounded-full bg-white/20 flex items-center justify-center"
                    >
                        <i
                            class="fa-solid fa-circle-check text-3xl"
                            aria-hidden="true"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold">
                            You're Eligible!
                        </h1>
                        <p class="text-emerald-100 text-lg">
                            You've passed the eligibility checker – here's
                            everything you need to apply.
                        </p>
                    </div>
                </div>
                {
                    isRoundOpen ? (
                        <a
                            href="https://portal.unltd.org.uk/apply"
                            class="inline-flex items-center gap-2 px-6 py-3 bg-white text-emerald-700 font-bold rounded-xl text-lg transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105 shrink-0"
                        >
                            <i class="fa-solid fa-rocket" aria-hidden="true" />
                            Apply Now
                            <i
                                class="fa-solid fa-arrow-right"
                                aria-hidden="true"
                            />
                        </a>
                    ) : (
                        <div class="inline-flex items-center gap-2 px-6 py-3 bg-white/20 text-white font-semibold rounded-xl text-lg shrink-0">
                            <i class="fa-solid fa-clock" aria-hidden="true" />
                            Applications open{" "}
                            {currentRound?.dates?.opens || "soon"}
                        </div>
                    )
                }
            </div>
        </div>
    </section>

    <!-- Exclusive Content Notice -->
    <section
        class="bg-amber-50 dark:bg-amber-950 border-b border-amber-200 dark:border-amber-800"
    >
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div class="flex items-start gap-3">
                <i
                    class="fa-solid fa-lock text-amber-600 dark:text-amber-400 mt-1"
                    aria-hidden="true"></i>
                <div>
                    <p
                        class="text-sm font-semibold text-amber-800 dark:text-amber-200"
                    >
                        This page is exclusive to eligible applicants
                    </p>
                    <p class="text-sm text-amber-700 dark:text-amber-300">
                        You're seeing this because you've completed our
                        eligibility checker and meet our criteria. Bookmark this
                        page to return later.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Awards Overview -->
    <Awards />

    <!-- Application Rounds Process with links and Apply button -->
    <ApplicationRoundsProcess showLinks={true} showApplyButton={true} />

    <!-- Support Resources -->
    <SupportResources />

    <!-- Timeline -->
    <ApplicationTimeline />

    <!-- FAQ Section -->
    <Questions />

    <!-- Final CTA -->
    <section class="bg-violet-950 text-white py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h2 class="text-3xl font-bold mb-4">Ready to apply?</h2>
            <p class="text-violet-200 text-lg mb-8 max-w-2xl mx-auto">
                You've got everything you need. If the round is open, submit
                your application through our portal. If it's closed, bookmark
                this page and come back when applications reopen.
            </p>
            {
                isRoundOpen ? (
                    <a
                        href="https://portal.unltd.org.uk/apply"
                        class="inline-flex items-center gap-2 px-8 py-4 bg-amber-500 hover:bg-amber-400 text-amber-950 font-bold rounded-xl text-lg transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105"
                    >
                        <i class="fa-solid fa-rocket" aria-hidden="true" />
                        Start Your Application
                        <i class="fa-solid fa-arrow-right" aria-hidden="true" />
                    </a>
                ) : (
                    <div class="space-y-4">
                        <div class="inline-flex items-center gap-2 px-8 py-4 bg-violet-800 text-violet-300 font-semibold rounded-xl text-lg">
                            <i class="fa-solid fa-clock" aria-hidden="true" />
                            Applications open{" "}
                            {currentRound?.dates?.opens || "soon"}
                        </div>
                        <p class="text-violet-400 text-sm">
                            Use this time to prepare your application using the
                            resources above.
                        </p>
                    </div>
                )
            }
        </div>
    </section>
</Template>
