---
import Grant from "../../components/Grant.astro";
const { application } = Astro.props;
import AButton from "../AButton.astro";

const url = "http://127.0.0.1:8090";
---

<aside
  class="col-span-12 md:col-span-7 lg:col-span-4 lg:auto-cols-fr flex flex-col gap-10 rounded-md md:self-start md:sticky md:top-10 md:bottom-60"
>
  <Grant application={application} />

  <div class="hidden md:flex flex-col rounded-md">
    {
      application.sections.map((section, index) => (
        <a
          href={`#${section.slug}`}
          class={`hover:text-violet-200 active:text-violet-800 active:bg-violet-800 hover:bg-violet-800 rounded-md flex items-center text-xs font-medium transition py-3 flex-row gap-2 group`}
        >
          <span class="text-violet-300 border-full h-5 w-5 bg-white bg-opacity-10 flex justify-center items-center rounded-full group-hover:scale-125 group-hover:bg-transparent">
            {index + 1}
          </span>
          <span class="text-white truncate active:text-white">
            {section.name}
          </span>
        </a>
      ))
    }
  </div>

  <div class="flex flex-col gap-1 rounded-md">
    <div class="flex flex-row gap-2 items-center">
      <h3 class="text font-medium leading-6 text-white">Downloads</h3>
    </div>
    <div class="mt-2 sm:flex flex-col gap-3 sm:items-start sm:justify-between">
      <div class="mt-5 sm:mt-0 sm:flex sm:flex-shrink-0 flex-col gap-2">
        <div class="flex flex-col gap-2">
          <div>
            {
              application.pdf && (
                <AButton
                  name="Download PDF"
                  url={`${url}/api/files/applications/${application.id}/${application.pdf}`}
                  icon="file-arrow-down"
                  before="true"
                  description=""
                />
              )
            }
          </div>
          <div>
            {
              application.docx && (
                <AButton
                  name="Download DOCX"
                  url={`${url}/api/files/applications/${application.id}/${application.docx}`}
                  icon="file-arrow-down"
                  before="true"
                  description="Recommended for Microsoft Word"
                />
              )
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</aside>
