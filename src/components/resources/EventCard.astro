---
/**
 * EventCard Component
 * A distinctive card for event resources
 */

import Icon from "@components/Icon.astro";
import { formatDate } from "@data/eventCollections";

interface Props {
    name: string;
    description: string;
    href: string;
    date?: Date | string;
    location?: string;
    isOnline?: boolean;
}

const {
    name,
    description,
    href,
    date,
    location,
    isOnline = true,
} = Astro.props;

// Format date for display
const formattedDate = date
    ? formatDate(typeof date === "string" ? date : date.toISOString())
    : null;
---

<a
    href={href}
    target="_blank"
    rel="noopener noreferrer"
    class="group relative flex overflow-hidden rounded-2xl bg-linear-to-br from-cyan-900/60 via-teal-800/40 to-cyan-900/60 ring-1 ring-cyan-600/40 hover:ring-cyan-400/60 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/15 hover:-translate-y-1"
>
    {/* Calendar sidebar */}
    <div
        class="flex flex-col items-center justify-center w-24 bg-linear-to-b from-cyan-600/40 to-teal-700/40 border-r border-cyan-500/30 p-3"
    >
        <div
            class="flex h-16 w-16 flex-col items-center justify-center rounded-xl bg-cyan-500/30 ring-1 ring-cyan-400/50 group-hover:bg-cyan-500/40 transition-all duration-300"
        >
            <Icon
                name="calendar-days"
                style="solid"
                class="h-6 w-6 text-cyan-200 mb-1"
            />
            {
                formattedDate && (
                    <span class="text-[10px] font-bold text-cyan-100 text-center leading-tight">
                        {formattedDate}
                    </span>
                )
            }
        </div>
    </div>

    <div class="flex-1 p-5">
        {/* Header */}
        <div class="flex items-start justify-between gap-3 mb-3">
            <span
                class="inline-flex items-center gap-1.5 rounded-full bg-cyan-600/40 px-3 py-1 text-xs font-semibold text-cyan-200 ring-1 ring-cyan-500/40"
            >
                <Icon name="calendar-check" style="solid" class="h-3 w-3" />
                Event
            </span>
            <span
                class="inline-flex items-center gap-1 rounded-full bg-cyan-800/50 px-2.5 py-1 text-xs font-medium text-cyan-300 ring-1 ring-cyan-600/40"
            >
                <Icon
                    name={isOnline ? "video" : "location-dot"}
                    style="solid"
                    class="h-3 w-3"
                />
                {isOnline ? "Online" : "In-person"}
            </span>
        </div>

        {/* Content */}
        <h3
            class="text-lg font-semibold text-cyan-100 group-hover:text-white transition-colors duration-200 line-clamp-2 mb-2"
        >
            {name}
        </h3>
        <p class="text-sm leading-relaxed text-cyan-300/80 line-clamp-2 mb-4">
            {description}
        </p>

        {/* Footer */}
        <div
            class="flex items-center gap-2 text-sm font-medium text-cyan-400 group-hover:text-cyan-300 transition-colors"
        >
            <span>View event</span>
            <Icon
                name="arrow-up-right-from-square"
                style="solid"
                class="h-3.5 w-3.5"
            />
        </div>
    </div>

    {/* Live indicator pulse for upcoming events */}
    <div class="absolute top-3 right-3">
        <span class="relative flex h-3 w-3">
            <span
                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"
            ></span>
            <span class="relative inline-flex rounded-full h-3 w-3 bg-cyan-400"
            ></span>
        </span>
    </div>
</a>
