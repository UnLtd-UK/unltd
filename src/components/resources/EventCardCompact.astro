---
/**
 * EventCardCompact Component
 * A balanced card for event resources
 */

import Icon from "@components/Icon.astro";
import { formatDate, type Event } from "@data/eventCollections";

interface Props {
    event: Event;
}

const { event } = Astro.props;

// Parse date for better display
const eventDate = new Date(event.start.local);
const day = eventDate.getDate();
const month = eventDate.toLocaleDateString("en-GB", { month: "short" });
const time = eventDate.toLocaleTimeString("en-GB", {
    hour: "2-digit",
    minute: "2-digit",
});
---

<a
    href={event.url}
    target="_blank"
    rel="noopener noreferrer"
    class="group relative flex overflow-hidden rounded-2xl bg-linear-to-br from-cyan-900/50 via-teal-800/30 to-cyan-900/50 ring-1 ring-cyan-600/30 hover:ring-cyan-400/50 transition-all duration-300 hover:shadow-xl hover:shadow-cyan-500/10 hover:-translate-y-0.5"
>
    {/* Calendar sidebar */}
    <div
        class="flex flex-col items-center justify-center w-24 bg-linear-to-b from-cyan-600/30 to-teal-700/30 border-r border-cyan-500/20 p-4"
    >
        <div
            class="flex flex-col items-center justify-center rounded-xl bg-cyan-500/25 ring-1 ring-cyan-400/40 w-full py-3 group-hover:bg-cyan-500/35 transition-all duration-300"
        >
            <span class="text-2xl font-bold text-cyan-100">{day}</span>
            <span class="text-xs font-semibold text-cyan-300 uppercase"
                >{month}</span
            >
        </div>
        <span class="text-xs text-cyan-400 mt-2">{time}</span>
    </div>

    <div class="flex-1 p-5">
        {/* Header */}
        <div class="flex items-start justify-between gap-3 mb-3">
            <span
                class="inline-flex items-center gap-1.5 rounded-full bg-cyan-600/30 px-3 py-1 text-xs font-semibold text-cyan-200 ring-1 ring-cyan-500/30"
            >
                <Icon name="calendar-check" style="solid" class="h-3 w-3" />
                Upcoming Event
            </span>
            <span
                class="inline-flex items-center gap-1 rounded-full bg-cyan-800/40 px-2.5 py-1 text-xs font-medium text-cyan-300 ring-1 ring-cyan-600/30"
            >
                <Icon
                    name={event.online_event ? "laptop" : "location-dot"}
                    style="solid"
                    class="h-3 w-3"
                />
                {event.online_event ? "Online" : "In-person"}
            </span>
        </div>

        {/* Content */}
        <h3
            class="text-lg font-semibold text-cyan-100 group-hover:text-white transition-colors duration-200 line-clamp-2 mb-2"
        >
            {event.name.text}
        </h3>

        {
            event.summary && (
                <p class="text-sm leading-relaxed text-cyan-300/70 line-clamp-2 mb-4">
                    {event.summary}
                </p>
            )
        }

        {/* Footer */}
        <div class="flex items-center justify-between">
            <div
                class="flex items-center gap-2 text-sm font-medium text-cyan-400 group-hover:text-cyan-300 transition-colors"
            >
                <span>View event</span>
                <Icon
                    name="arrow-up-right-from-square"
                    style="solid"
                    class="h-3.5 w-3.5"
                />
            </div>

            {/* Live indicator */}
            <span class="relative flex h-3 w-3">
                <span
                    class="animate-ping absolute inline-flex h-full w-full rounded-full bg-cyan-400 opacity-75"
                ></span>
                <span
                    class="relative inline-flex rounded-full h-3 w-3 bg-cyan-400"
                ></span>
            </span>
        </div>
    </div>
</a>
