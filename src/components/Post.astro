---
import moment from "moment";
import BlogAvatar from "./BlogAvatar";
const { post } = Astro.props;
---

<li class="col-span-1 divide-y divide-gray-200 rounded-lg shadow">
    <a href={`/blog/${post.slug}`}>
        <article
            class="flex flex-col items-start justify-between transition hover:bg-violet-100 dark:hover:bg-violet-900 hover:outline-violet-200 hover:dark:outline-violet-800 p-6 rounded-2xl"
        >
            <div class="relative w-full h-64">
                {
                    post.image !== null ? (
                        <img
                            src={`https://unltd.directus.app/assets/${post.image}`}
                            alt=""
                            class="absolute inset-0 w-full h-full object-cover rounded-2xl"
                        />
                    ) : (
                        <div class="error-boundary rounded-2xl">
                            <BlogAvatar title={post.title} client:only="react" />
                        </div>
                    )
                }
            </div>
            <div class="max-w-xl">
                <div class="mt-8 flex items-center gap-x-4 text-xs">
                    <time
                        datetime={post.date_time}
                        class="text-violet-600 dark:text-violet-400"
                    >
                        {
                            moment(post.date_time).format(
                                "ddd hh:mm, DD MMM YYYY",
                            )
                        }
                    </time>
                    <span
                        class="relative z-10 rounded-full bg-violet-100 dark:bg-violet-900 px-3 py-1.5 font-medium text-violet-600 dark:text-violet-400"
                    >
                        {post.tag}
                    </span>
                </div>
                <div class="group relative">
                    <h3
                        class="mt-3 text-lg font-semibold leading-6 text-violet-700 dark:text-violet-300"
                    >
                        <span class="absolute inset-0"></span>
                        {post.title}
                    </h3>
                </div>
                <p
                    class="mt-5 line-clamp-3 text-sm leading-6 text-violet-600 dark:text-violet-400"
                >
                    {post.description}
                </p>
            </div>
            <div class="relative mt-8 flex gap-x-4 text-sm leading-6 flex-col">
                <p class="font-semibold text-violet-700 dark:text-violet-300">
                    <span class="absolute inset-0"></span>
                    {post.author_name}
                </p>
                <p class="text-violet-600 dark:text-violet-400">
                    {post.author_position}
                </p>
            </div>
        </article>
    </a>
</li>
