---
const { application, url = false } = Astro.props;
import { marked } from "marked";
marked.use({ mangle: false, headerIds: false });
application.body = marked.parse(application.body);
application.grant_description = marked.parse(application.grant_description);

let Element = "div";

if (url) {
  Element = "a";
}
---

<Element
  href={Element == "a" && `/awards/application-preview/${application.slug}`}
  class={`flex flex-col gap-1 justify-between rounded-md  ${
    Element == "a" &&
    "flex flex-col gap-1 transition border-white border border-opacity-20 shadow-md hover:shadow-xl hover:scale-105 hover:bg-white hover:border-opacity-50 hover:bg-opacity-5 py-7 px-7 col-span-1"
  }`}
>
  <div class="flex flex-col gap-7">
    <div class="flex gap-2 f flex-col">
      <div
        class="text-sm text-white flex flex-col gap-3 mt-2"
        set:html={application.body}
      />
      <p class="text-white tracking-tight">
        {application.awards} Award
      </p>
      <div class="flex flex-row items-center gap-2">
        <p class="text-xs uppercase text-amber-400 tracking-tight">Up to</p>
      </div>
      <div class="flex flex-col gap-2">
        <p class="text-amber-100 text-3xl font-bold">
          {
            new Intl.NumberFormat("en-GB", {
              maximumSignificantDigits: 3,
              style: "currency",
              currency: "GBP",
            }).format(application.grant_amount)
          }
        </p>
        <div
          class="text-sm text-white flex flex-col gap-3 mt-2"
          set:html={application.grant_description}
        />
      </div>
    </div>
  </div>
</Element>
