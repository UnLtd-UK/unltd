---
// NEW FOOTER
import { navigation } from "@data/navigation.js";
const nav = navigation.code;
import Container from "@components/Container.astro";

// OLD FOOTER
// import navigation from "@data/nav.json";
// const nav = navigation;

import Logo from "@components/Logo.jsx";

const styles = {
  fill: "fill-slate-600 dark:fill-slate-400",
};
---

<footer
  class="bg-slate-200 dark:bg-slate-800 py-32"
  aria-labelledby="footer-heading"
>
  <h2 id="footer-heading" class="sr-only">Footer</h2>
  <Container>
    <div class="xl:grid xl:grid-cols-3 xl:gap-8">
      <div class="space-y-6">
        <Logo styles={styles} />
        <div class="flex gap-2">
          <i
            class="text-xs text-slate-400 dark:text-slate-600 fa-solid fa-location-dot"
          ></i>
          <a href="https://goo.gl/maps/AL5FhXFppVMmZsob6" target="_blank"
            ><address
              class="text-sm text-slate-600 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300 flex flex-col"
            >
              <span>{nav.footer.address.address1}</span>
              <span>{nav.footer.address.address2}</span>
              <span>{nav.footer.address.address3}</span>
            </address>
          </a>
        </div>
        <div class="flex gap-2">
          <i
            class="text-xs text-slate-400 dark:text-slate-600 fa-solid fa-phone"
          ></i>
          <a
            class="text-sm text-slate-600 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"
            href={`tel:${nav.footer.phone}`}>{nav.footer.phone}</a
          >
        </div>
        <div class="flex space-x-6">
          {
            nav.footer.socials.map((social) => (
              <a
                href={social.link}
                class="text-slate-400 hover:text-slate-500 dark:text-slate-400 dark:hover:text-slate-300"
              >
                <span class="sr-only">{social.name}</span>
                <i class={`h-6 w-6 ${social.icon}`} />
              </a>
            ))
          }
        </div>
        <div class="">
          <ul role="list" class="mt-6 space-y-4">
            {
              nav.footer.regulatory.map((regulator) => (
                <li>
                  <a
                    href={regulator.link}
                    class="text-sm leading-6 text-slate-900 dark:text-slate-400 dark:hover:text-slate-300"
                  >
                    {regulator.name}
                  </a>
                  <br />
                  <span class="text-xs text-slate-500 dark:text-slate-500">
                    {regulator.number}
                  </span>
                </li>
              ))
            }
          </ul>
          <button
            type="button"
            onclick="if (window.zaraz && typeof window.zaraz.showConsentModal === 'function') { window.zaraz.showConsentModal(); } else { console.log('Zaraz API not available'); }"
            class="text-sm leading-6 text-slate-900 dark:text-slate-400 dark:hover:text-slate-300"
          >
            Consent Banner Settings
          </button>
        </div>
      </div>
      <div class="mt-16 grid grid-cols-2 gap-8 xl:col-span-2 xl:mt-0">
        <div class="md:grid md:grid-cols-2 md:gap-8">
          {
            nav.footer.links &&
              nav.footer.links.map((link, index) => {
                if (index < 2 && Object.keys(link).length !== 0)
                  return (
                    <div class={index == 1 && `mt-10 md:mt-0`}>
                      <h3 class="text-sm font-semibold leading-6 text-slate-700 dark:text-slate-300">
                        {link.name}
                      </h3>
                      <ul role="list" class="mt-6 space-y-4">
                        {link.items.map((item, i) => (
                          <li>
                            <a
                              href={item.link ? item.link : `/${item.slug}`}
                              class="text-sm leading-6 text-slate-600 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300"
                            >
                              {item.name}
                              {!item.slug && item.link && (
                                <i class="text-xs fa-solid fa-arrow-up-right-from-square" />
                              )}
                            </a>
                            {item.description && (
                              <span class="text-xs text-slate-500">
                                {item.description}
                              </span>
                            )}
                          </li>
                        ))}
                      </ul>
                    </div>
                  );
              })
          }
        </div>
        <div class="md:grid md:grid-cols-2 md:gap-8">
          {
            nav.footer.links &&
              nav.footer.links.map((link, index) => {
                if (index > 1 && Object.keys(link).length !== 0)
                  return (
                    <div class={index == 3 && `mt-10 md:mt-0`}>
                      <h3 class="text-sm font-semibold leading-6 text-slate-900 dark:text-slate-300">
                        {link.name}
                      </h3>
                      <ul role="list" class="mt-6 space-y-4">
                        {link.items.map((item, i) => (
                          <li>
                            <a
                              href={item.link ? item.link : `/${item.slug}`}
                              class="text-sm leading-6 text-slate-600 hover:text-slate-900 dark:text-slate-400 dark:hover:text-slate-300"
                            >
                              {item.name}
                              {!item.slug && item.link && (
                                <i class="text-xs fa-solid fa-arrow-up-right-from-square" />
                              )}
                            </a>
                            {item.description && (
                              <span class="text-xs text-slate-500">
                                {item.description}
                              </span>
                            )}
                          </li>
                        ))}
                      </ul>
                    </div>
                  );
              })
          }
        </div>
      </div>
    </div>
  </Container>
</footer>
