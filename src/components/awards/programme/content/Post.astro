---
const { post, styles } = Astro.props;
import slugify from "slugify";
import moment from "moment";
---

<article class="group relative flex flex-col">
    <div
        class={`relative aspect-video w-full overflow-hidden rounded-2xl shadow-lg`}
    >
        <img
            src={post.id.image !== null && post.id.image.id !== null
                ? `https://unltd.directus.app/assets/${post.id.image.id}?width=600&height=340`
                : `/img/blog/${slugify(post.tag || "default", { lower: true, strict: true, locale: "en", trim: true })}.webp`}
            alt={post.id.title}
            class="h-full w-full object-cover transition duration-300 group-hover:scale-105"
        />
        <div
            class={`absolute inset-0 bg-gradient-to-t ${styles.gradient} opacity-60`}
        >
        </div>
        <div class="absolute bottom-0 left-0 right-0 p-6">
            <div
                class={`flex items-center gap-x-2 text-xs ${styles.text} opacity-90`}
            >
                <time datetime={post.id.date_time}>
                    {moment(post.id.date_time).format("DD MMM YYYY")}
                </time>
                {
                    post.id.author_name && (
                        <>
                            <span>Â·</span>
                            <span>{post.id.author_name}</span>
                        </>
                    )
                }
            </div>
        </div>
    </div>
    <div class="mt-4">
        <h3
            class={`text-base font-semibold leading-6 ${styles.text} group-hover:opacity-80 transition`}
        >
            <a href={`/blog/${post.id.slug}`}>
                <span class="absolute inset-0"></span>
                {post.id.title}
            </a>
        </h3>
        {
            post.id.description && (
                <p
                    class={`mt-2 line-clamp-2 text-sm leading-6 ${styles.text2}`}
                >
                    {post.id.description}
                </p>
            )
        }
    </div>
</article>
