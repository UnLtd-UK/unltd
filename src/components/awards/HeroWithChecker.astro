---
import Container from "@components/Container.astro";
import RoundWidget from "@components/awards/RoundWidget.astro";
import { rounds } from "@data/rounds.js";
import { processAllRounds } from "@utils/application-rounds.js";

const benefits = [
    { text: "No account required", icon: "fa-regular fa-circle-check" },
    { text: "Instant results", icon: "fa-regular fa-sparkles" },
    { text: "Next steps sent via email", icon: "fa-regular fa-envelope" },
];

const checkerUrl = "https://unltduk.typeform.com/awards-checker";

// Process rounds using the utility
const { currentRound, nextOpenRound } = processAllRounds(rounds || []);
---

<section class="bg-violet-950 pt-16 lg:pt-20">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div
            class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-start"
        >
            <!-- Left: Hero Content -->
            <div class="lg:pr-8">
                <p class="text-base font-semibold leading-7 text-amber-500">
                    For social entrepreneurs
                </p>
                <h1
                    class="mt-2 text-4xl font-bold tracking-tight text-white sm:text-5xl lg:text-6xl"
                >
                    Awards
                </h1>
                <!-- <p
                    class="mt-6 text-lg leading-8 font-medium text-pretty text-violet-300 sm:text-xl/8"
                >
                    An Award is a grant and enrollment onto one of our
                    programmes;
                    <a
                        href="/awards/millennium-awards-trust"
                        class="cursor-pointer inline-flex items-center rounded-md bg-yellow-400/30 px-2 py-1 text-lg font-medium text-yellow-400 inset-ring inset-ring-yellow-400/20 transition-transform duration-200 ease-out hover:scale-105 focus-visible:scale-105"
                    >
                        Millennium Awards Trust
                    </a>
                    or
                    <a
                        href="/awards/funding-futures-programme"
                        class="cursor-pointer inline-flex items-center rounded-md bg-purple-400/30 px-2 py-1 text-lg font-medium text-purple-400 inset-ring inset-ring-purple-400/20 transition-transform duration-200 ease-out hover:scale-105 focus-visible:scale-105"
                    >
                        Funding Futures Programme
                    </a>. We offer two types of Awards, starting up awards for
                    early stage social entrepreneurs and scaling-up for social
                    entrepreneurs who've been trading for over a year.
                </p> -->

                <p
                    class="mt-6 text-lg leading-8 font-medium text-pretty text-violet-300 sm:text-xl/8"
                >
                    You have an idea, or you are already creating a positive
                    social impact with your venture and are looking to develop.
                    We combine funding and support specifically tailored to you.
                </p>

                <!-- Application Rounds Widget - Full width -->
                {
                    currentRound && (
                        <div class="mt-8">
                            <RoundWidget
                                currentRound={currentRound}
                                nextOpenRound={nextOpenRound}
                            />
                        </div>
                    )
                }

                <!-- Navigation Cards -->
                <div class="mt-4">
                    <a
                        href="/awards1#faq"
                        class="group block bg-violet-900/50 rounded-xl p-5 border border-violet-800 hover:bg-violet-800/50 hover:border-violet-600 transition-all duration-200"
                    >
                        <h3
                            class="font-semibold text-white mb-2 flex items-center gap-2"
                        >
                            <i
                                class="fa-regular fa-circle-question h-5 w-5 text-violet-400 group-hover:text-amber-400 transition-colors"
                                aria-hidden="true"></i>
                            FAQs
                        </h3>
                        <p class="text-violet-300 text-sm leading-relaxed mb-3">
                            Get answers to commonly asked questions about our
                            Awards.
                        </p>
                        <span
                            class="inline-flex items-center gap-1 text-sm font-medium text-amber-400 group-hover:text-amber-300"
                        >
                            View FAQs
                            <i
                                class="fa-solid fa-arrow-right h-3 w-3 transition-transform group-hover:translate-x-1"
                                aria-hidden="true"></i>
                        </span>
                    </a>
                </div>
            </div>

            <!-- Right: Eligibility Checker -->
            <div id="eligibility-checker" class="lg:sticky lg:top-8">
                <div
                    class="bg-violet-950 rounded-2xl overflow-hidden shadow-2xl border border-violet-100"
                >
                    <div
                        class="bg-violet-100 px-4 py-2.5 border-b border-violet-100 flex items-center justify-between"
                    >
                        <span
                            class="inline-flex items-center rounded-full bg-amber-500 text-amber-950 px-3 py-1 text-sm font-semibold"
                        >
                            Required First Step
                        </span>
                        <a
                            href={checkerUrl}
                            target="_blank"
                            rel="noopener noreferrer"
                            class="inline-flex items-center gap-1 rounded-full px-3 py-1 text-sm font-semibold text-violet-900 hover:text-violet-800 transition-colors"
                        >
                            Open in new tab
                            <i
                                class="fa-regular fa-arrow-up-right-from-square h-3 w-3"
                                aria-hidden="true"></i>
                        </a>
                    </div>

                    <div class="relative bg-violet-950">
                        <div
                            data-tf-live="01KA7RWQS22SHZE07GHDBWDV37"
                            title="Eligibility Checker"
                            class="w-full border-0"
                            loading="lazy"
                        >
                        </div>
                    </div>

                    <div class="flex flex-wrap justify-center gap-4 mb-6">
                        {
                            benefits.map((item) => (
                                <div class="flex items-center gap-2 text-xs">
                                    <i
                                        class={`${item.icon} h-3.5 w-3.5 text-violet-400`}
                                        aria-hidden="true"
                                    />
                                    <span class="text-violet-300">
                                        {item.text}
                                    </span>
                                </div>
                            ))
                        }
                    </div>
                </div>

                <!-- Small print: Eligibility criteria link -->
                <p class="mt-3 text-center text-xs text-violet-400">
                    View our full <a
                        href="/awards1/eligibility-criteria"
                        class="underline hover:text-violet-300 transition-colors"
                        >eligibility criteria</a
                    > for all awards.
                </p>
            </div>
        </div>
    </div>
</section>
