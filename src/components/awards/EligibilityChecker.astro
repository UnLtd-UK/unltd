---
import Icon from "@components/Icon.astro";
import EmbedLoader from "@components/EmbedLoader";
import { benefits, checkerUrl } from "@data/eligibilityChecker";

// Typeform iframe embed URL
const typeformEmbedUrl = `${checkerUrl}?typeform-embed=embed-widget`;
---

<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center mb-12 flex flex-col gap-5">
        <h2
            class="text-3xl md:text-4xl font-bold text-violet-900 dark:text-violet-100 mb-4"
        >
            Check your eligibility
        </h2>
        <p
            class="text-lg text-violet-700 dark:text-violet-300 max-w-2xl mx-auto"
        >
            Everyone must complete the eligibility checker to begin the
            application process. It's the fastest way to find out which awards
            you qualify for. If you're eligible, you'll receive an email with
            your personalised next steps, including access to our portal and
            resources to help you apply.
        </p>

        <div class="flex flex-wrap justify-center gap-6">
            {
                benefits.map((item) => (
                    <div class="flex items-center gap-2 text-sm">
                        <Icon
                            name={item.iconName}
                            style={item.iconStyle}
                            class="h-4 w-4 text-violet-400"
                        />
                        <span class="text-violet-300">{item.text}</span>
                    </div>
                ))
            }
        </div>
    </div>

    <div class="bg-white rounded-2xl overflow-hidden shadow-2xl">
        <div
            class="bg-violet-100 px-4 py-3 border-b border-violet-200 flex items-center justify-between"
        >
            <span
                class="inline-flex items-center rounded-full bg-amber-500 text-amber-950 px-3 py-1 text-sm font-semibold"
            >
                Required First Step
            </span>
            <span class="text-sm font-medium text-violet-700"
                >Eligibility Checker</span
            >

            <a
                href={checkerUrl}
                target="_blank"
                rel="noopener noreferrer"
                class="inline-flex items-center gap-1 rounded-full px-3 py-1 text-sm font-semibold text-violet-600 hover:text-violet-900"
            >
                Open in new tab
                <Icon
                    name="arrow-up-right-from-square"
                    style="regular"
                    class="h-3 w-3"
                />
            </a>
        </div>

        <div class="relative bg-violet-950" style="min-height: 500px;">
            <EmbedLoader
                client:load
                src={typeformEmbedUrl}
                title="Eligibility Checker"
                className="w-full h-full"
            />
        </div>
    </div>
</div>
