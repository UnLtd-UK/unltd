---
import { programmes } from "../../data/programmes.js";
import { services } from "../../data/services.js";
import truncate from "truncate";

import Programme from "../../components/award/Programme.astro";
import { Description } from "../catalyst/fieldset";
import { sesm } from "../../data/sesm.js";

programmes.map((programme) => {
  const slugify = (text) =>
    text
      .toString()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .toLowerCase()
      .trim()
      .replace(/\s+/g, "-")
      .replace(/[^\w-]+/g, "")
      .replace(/--+/g, "-");

  programme.slug = slugify(programme.name);
});
---

<div class="mx-auto max-w-7xl px-6 lg:px-8">
  <div class="mx-auto max-w-2xl lg:text-center">
    <h1 class="text-base font-semibold leading-7 text-amber-600">Support</h1>
    <p
      class="mt-2 text-4xl font-bold tracking-tight text-slate-900 sm:text-5xl"
    >
      Your programme
    </p>
    <p
      class="mx-auto mt-6 max-w-2xl text-center text-lg leading-8 text-slate-600"
    >
      Based on your age, geography and sectors you're working in, you'll be
      placed on one of our programmes. Programmes make sure our services are
      specialised to match you and your social enterprises needs.
    </p>
  </div>

  <div class="flex flex-col gap-20">
    <!-- support programmes -->
    <div
      class="mx-auto mt-16 max-w-2xl gap-6 sm:mt-20 lg:mx-0 lg:max-w-none flex flex-col"
    >
      <div class="flex gap-6 justify-center flex-col lg:flex-row">
        <article
          class="relative isolate flex flex-col gap-4 justify-end overflow-hidden rounded-2xl outline-slate-200 w-full px-8 py-10 md:w-1/3 outline-dashed outline-2 outline-offset-2"
        >
          <div>
            <span class="relative inline-block">
              <div
                class={`flex items-center justify-center h-14 w-14 rounded-md bg-amber-600`}
              >
                <i class="fa-solid fa-award-simple text-amber-200 text-2xl"></i>
              </div>
            </span>
            <h3 class={`mt-3 font-semibold leading-6 text-slate-800`}>
              <span class="absolute inset-0"></span>
              <p class="text-lg">Core</p>
            </h3>
            <p class={`text-slate-700 text-sm`}>
              {truncate("Funded by the Millennium Awards Trust", 100)}
            </p>
          </div>

          <div class="flex flex-col gap-3">
            <div>
              <p
                class={`truncate text-xs font-medium text-slate-400 uppercase`}
              >
                <i class={`fa-solid fa-spinner text-slate-500`}></i>{" "}
                Age
              </p>
              <p
                class={`mt-1 text-base font-semibold tracking-tight text-slate-500`}
              >
                16+
              </p>
            </div>
            <div>
              <p
                class={`truncate text-xs font-medium text-slate-400 uppercase`}
              >
                <i class={`fa-solid fa-location-dot text-slate-500`}></i>
                Geography
              </p>
              <p
                class={`mt-1 text-base font-semibold tracking-tight text-slate-500`}
              >
                United Kingdom
              </p>
            </div>
            <div>
              <p
                class={`truncate text-xs font-medium text-slate-400 uppercase`}
              >
                <i class={`fa-solid fa-vector-square text-slate-500`}></i>{" "}
                Sectors
              </p>
              <p
                class={`mt-1 text-base font-semibold tracking-tight text-slate-500`}
              >
                All sectors
              </p>
            </div>
          </div>
        </article>
        {
          programmes.map(
            (programme, i) =>
              i < 2 && (
                <Programme
                  image={programme.image.id}
                  icon={programme.icon}
                  colour={programme.colour}
                  name={programme.name}
                  blurb={programme.blurb}
                  slug={programme.slug}
                  age={programme.age}
                  geography={programme.geography}
                  sectors={programme.sectors}
                />
              ),
          )
        }
      </div>
      <div class="flex gap-6 justify-center flex-col md:flex-row">
        {
          programmes.map(
            (programme, i) =>
              i >= 2 && (
                <Programme
                  image={programme.image.id}
                  icon={programme.icon}
                  colour={programme.colour}
                  name={programme.name}
                  blurb={programme.blurb}
                  slug={programme.slug}
                  age={programme.age}
                  geography={programme.geography}
                  sectors={programme.sectors}
                  size="w-9"
                />
              ),
          )
        }
      </div>
    </div>
  </div>

  <div class="flex -space-x-2 overflow-hidden"></div>

  <!-- support services -->
  <div
    class="mx-auto grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 sm:gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3"
  >
    <div class="basis-2/6 flex flex-col gap-2">
      <h2 class="text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl">
        Services
      </h2>
      <p class="text-slate-500">
        UnLtd supports social entrepreneurs who are tackling a range of social
        or environmental issues. If your application fits either of these areas,
        a dedicated team will handle your application and support.
      </p>
      <div class="flex -space-x-2 overflow-hidden">
        {
          sesm.map((employee) => (
            <img
              class="inline-block h-10 w-10 rounded-full ring-2 ring-white"
              src={`https://unltd.directus.app/assets/${employee.person.image}`}
              alt={`${employee.person.name}`}
            />
          ))
        }
      </div>
    </div>

    <div class="col-span-2 grid grid-cols-1 gap-x-4 gap-y-4 sm:grid-cols-2">
      {
        services.map((service) => (
          <div class="flex-1 relative isolate flex flex-col justify-end overflow-hidden rounded-2xl p-8 gap-4">
            <dt class="text-base font-semibold leading-7 text-slate-900">
              <div class="mb-6 flex h-10 w-10 items-center justify-center rounded-full bg-slate-200">
                <i class={`${service.icon} text-slate-500 text-md`} />
              </div>
              {service.name}
            </dt>
            <dd class="mt-1 text-base leading-7 text-slate-600">
              {service.description}
            </dd>
          </div>
        ))
      }
    </div>
  </div>

  <!-- support impact areas -->

  <!-- <div
            class="mx-auto flex max-w-2xl gap-x-8 gap-y-16 sm:gap-y-20 lg:mx-0 lg:max-w-none"
          >
            <div class="basis-2/6 flex flex-col gap-2">
              <h2
                class="text-3xl font-bold tracking-tight text-slate-900 sm:text-4xl"
              >
                Sectors
              </h2>
              <p class="text-slate-500">
                While we provide Awards across many sectors, certain sectors
                benefit from our dedicated teams and specialised support.
              </p>
            </div>

            <div
              class="grid grid-cols-1 gap-4 sm:grid-cols-2 max-h-[360px] overflow-hidden bg-gradient-to-t to-white from-transparent"
            >
              {
                areas.map((area) => (
                  <div
                    class={`relative flex items-center space-x-3 px-6 py-5 ${
                      area.description &&
                      "rounded-lg border border-slate-300 bg-white shadow-sm focus-within:ring-2 focus-within:ring-amber-500 focus-within:ring-offset-2 hover:border-slate-400"
                    }`}
                  >
                    <div class="flex-shrink-0">
                      <div
                        class={`flex h-10 w-10 items-center justify-center rounded-full ${
                          area.description && "bg-amber-50 ring-amber-600/20"
                        }`}
                      >
                        <i
                          class={`${area.icon} ${
                            area.description && "text-amber-800"
                          } text-xs`}
                        />
                      </div>
                    </div>
                    <div class="min-w-0 flex-1">
                      <a href={`/${area.name}`} class="focus:outline-none">
                        <span class="absolute inset-0" aria-hidden="true" />
                        {area.description && (
                          <span class="inline-flex items-center rounded-md bg-amber-50 px-2 py-1 text-xs font-medium text-amber-800 ring-1 ring-inset ring-amber-600/20">
                            Enhanced support
                          </span>
                        )}
                        <p class="text-sm font-medium text-slate-900">
                          {area.name}
                        </p>
                      </a>
                    </div>
                  </div>
                ))
              }
            </div>

            <div class="basis-4/6 flex flex-col gap-4">
              {
                areas.map((area) =>
                  area.icon ? (
                    <div class="flex-1 p-8 bg-slate-50 rounded-2xl flex flex-col gap-6">
                      <div>
                        <div class="text-base font-semibold leading-7 text-slate-900">
                          <div class="mb-6 flex h-10 w-10 items-center justify-center rounded-lg bg-amber-600">
                            <i class={`${area.icon} text-white text-md`} />
                          </div>
                          {area.name}
                        </div>
                        <p class="text-base leading-7 text-slate-600">
                          {area.description}
                        </p>
                      </div>
                      <div class="isolate flex -space-x-2 overflow-hidden">
                        <img
                          class="relative z-30 inline-block h-10 w-10 rounded-full ring-2 ring-white"
                          src="https://images.unsplash.com/photo-1491528323818-fdd1faba62cc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                          alt=""
                        />
                        <img
                          class="relative z-20 inline-block h-10 w-10 rounded-full ring-2 ring-white"
                          src="https://images.unsplash.com/photo-1550525811-e5869dd03032?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                          alt=""
                        />
                        <img
                          class="relative z-10 inline-block h-10 w-10 rounded-full ring-2 ring-white"
                          src="https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2.25&w=256&h=256&q=80"
                          alt=""
                        />
                        <img
                          class="relative z-0 inline-block h-10 w-10 rounded-full ring-2 ring-white"
                          src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"
                          alt=""
                        />
                      </div>
                    </div>
                  ) : (
                    <span class="inline-flex items-center rounded-md bg-slate-50 px-2 py-1 text-xs font-medium text-slate-600 ring-1 ring-inset ring-slate-500/10">
                      {area.name}
                    </span>
                    // <div class="p-3 bg-slate-50 rounded-2xl text-slate-800">
                    //   {area.name}
                    // </div>
                  ),
                )
              }
            </div>
          </div> -->
</div>
